$(document).ready(function(){var A=$("#universeHolder");if(A.length>0){var B=$("<div>");var C=$("<div>");B.attr("id","mainDiv");C.attr("id","sideDiv");A.append(B);A.append(C);paintUniverse(B,new Array());paintRowNumberInput(C);paintNextGenButton(C);paintContinueCheckBox(C)}});function paintRowNumberInput(C){var B=$("<span>");var A=$("<input>");A.attr("type","text");A.attr("id","numberOfRowsInput");A.change(paintUniverse($("#mainDiv"),new Array()));A.val(5);B.attr("class","btn");B.append("Grid Size");B.append(A);C.append(B)}function paintNextGenButton(C){var B=$("<span>");var A=$("<input>");A.attr("type","button");A.attr("onclick",'javascript:paintNextGen($("#mainDiv"))');A.attr("value","Show Next Gen");A.attr("class","btn");B.append(A);C.append(B)}function paintContinueCheckBox(C){var B=$("<span>");var A=$("<input>");A.attr("type","checkbox");A.attr("id","continueCheckbox");A.attr("onclick",'javascript:paintNextGenContinuously($("#mainDiv"))');B.attr("class","btn");B.append(A);B.append("Loop Continuously");C.append(B)}function getUniverseBorder(){return 1}function getUniverseWidth(){return"33%"}function getNumberOfRows(){var A=5;if($("#numberOfRowsInput").length>0){A=$("#numberOfRowsInput").val()}return A}function getNumberOfCols(){return getNumberOfRows()}function isAlive(A){return($("#"+A).length>0)&&($("#"+A).html()=="*")}function killCell(A){$("#"+A).html("&nbsp;&nbsp;")}function giveLifeToCell(A){$("#"+A).html("*")}function toggleLife(A){if(isAlive(A)){killCell(A)}else{giveLifeToCell(A)}}function getNeighbours(D){var B=D.split("-");var A=B[2];var E=B[3];var C=new Array();C[0]=B[0]+"-"+B[1]+"-"+(A-1)+"-"+(E-1);C[1]=B[0]+"-"+B[1]+"-"+(A-1)+"-"+E;C[2]=B[0]+"-"+B[1]+"-"+(A-1)+"-"+(1+parseInt(E));C[3]=B[0]+"-"+B[1]+"-"+A+"-"+(E-1);C[4]=B[0]+"-"+B[1]+"-"+A+"-"+(1+parseInt(E));C[5]=B[0]+"-"+B[1]+"-"+(parseInt(A)+1)+"-"+(E-1);C[6]=B[0]+"-"+B[1]+"-"+(parseInt(A)+1)+"-"+E;C[7]=B[0]+"-"+B[1]+"-"+(parseInt(A)+1)+"-"+(1+parseInt(E));return C}function getCountOfAliveNeighbours(D){var B=getNeighbours(D);var C=0;for(var A=0;A<8;A++){if(isAlive(B[A])){C++}}return C}function findNextGenAliveCells(){var B=new Array();for(var A=0;A<getNumberOfRows();A++){for(var D=0;D<getNumberOfCols();D++){var C="universe-cell-"+A+"-"+D;if(shouldBeAliveInNextGen(C)){B[B.length]=C}}}return B}function shouldBeAliveInNextGen(C){var A=false;var B=getCountOfAliveNeighbours(C);if(isAlive(C)&&(B==2||B==3)){A=true}else{if((!isAlive(C))&&(B==3)){A=true}}return A}function paintNextGen(B){var A=findNextGenAliveCells();paintUniverse(B,A)}function paintNextGenContinuously(B){var A=setInterval(function(){if(!$("#continueCheckbox").is(":checked")){clearInterval(A);return }paintNextGen(B)},1000)}function paintUniverse(E,A){var G=$("<table>");G.attr("border",getUniverseBorder());G.attr("width",getUniverseWidth());G.attr("align","center");G.attr("id","universe");var C=getNumberOfRows();var D=getNumberOfCols();$(E).html(G);for(i=0;i<C;i++){var F=$("<tr>");for(j=0;j<D;j++){var B=$("<td>");var H="universe-cell-"+i+"-"+j;B.attr("id",H);B.attr("onclick","toggleLife(this.id);");B.attr("width",G.width()/D+"px");B.attr("height",G.width()/C+"px");B.attr("align","center");if(A.indexOf(H)<0){B.html("&nbsp;&nbsp;")}else{B.html("*")}F.append(B)}G.append(F)}};