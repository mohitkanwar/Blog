/*
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.1
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function(){var Z=this,AJ=Z.Chart,AN=function(B){this.canvas=B.canvas,this.ctx=B;var A=function(M,L){return M["offset"+L]?M["offset"+L]:document.defaultView.getComputedStyle(M).getPropertyValue(L)},C=this.width=A(B.canvas,"Width"),F=this.height=A(B.canvas,"Height");B.canvas.width=C,B.canvas.height=F;var C=this.width=B.canvas.width,F=this.height=B.canvas.height;return this.aspectRatio=this.width/this.height,j.retinaScale(this),this};AN.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},AN.types={};var j=AN.helpers={},AF=j.each=function(B,A,F){var C=Array.prototype.slice.call(arguments,3);if(B){if(B.length===+B.length){var M;for(M=0;M<B.length;M++){A.apply(F,[B[M],M].concat(C))}}else{for(var L in B){A.apply(F,[B[L],L].concat(C))}}}},AE=j.clone=function(B){var A={};return AF(B,function(F,C){B.hasOwnProperty(C)&&(A[C]=F)}),A},AR=j.extend=function(A){return AF(Array.prototype.slice.call(arguments,1),function(B){AF(B,function(F,C){B.hasOwnProperty(C)&&(A[C]=F)})}),A},AK=j.merge=function(){var A=Array.prototype.slice.call(arguments,0);return A.unshift({}),AR.apply(null,A)},AH=j.indexOf=function(B,A){if(Array.prototype.indexOf){return B.indexOf(A)}for(var C=0;C<B.length;C++){if(B[C]===A){return C}}return -1},AA=(j.where=function(B,A){var C=[];return j.each(B,function(F){A(F)&&C.push(F)}),C},j.findNextWhere=function(B,A,F){F||(F=-1);for(var C=F+1;C<B.length;C++){var L=B[C];if(A(L)){return L}}},j.findPreviousWhere=function(B,A,F){F||(F=B.length);for(var C=F-1;C>=0;C--){var L=B[C];if(A(L)){return L}}},j.inherits=function(B){var A=this,F=B&&B.hasOwnProperty("constructor")?B.constructor:function(){return A.apply(this,arguments)},C=function(){this.constructor=F};return C.prototype=A.prototype,F.prototype=new C,F.extend=AA,B&&AR(F.prototype,B),F.__super__=A.prototype,F}),AP=j.noop=function(){},Y=j.uid=function(){var A=0;return function(){return"chart-"+A++}}(),AO=j.warn=function(A){window.console&&"function"==typeof window.console.warn&&console.warn(A)},AD=j.amd="function"==typeof define&&define.amd,AM=j.isNumber=function(A){return !isNaN(parseFloat(A))&&isFinite(A)},AL=j.max=function(A){return Math.max.apply(Math,A)},AG=j.min=function(A){return Math.min.apply(Math,A)},V=(j.cap=function(B,A,C){if(AM(A)){if(B>A){return A}}else{if(AM(C)&&C>B){return C}}return B},j.getDecimalPlaces=function(A){return A%1!==0&&AM(A)?A.toString().split(".")[1].length:0}),G=j.radians=function(A){return A*(Math.PI/180)},Q=(j.getAngleFromPoint=function(B,A){var F=A.x-B.x,C=A.y-B.y,M=Math.sqrt(F*F+C*C),L=2*Math.PI+Math.atan2(C,F);return 0>F&&0>C&&(L+=2*Math.PI),{angle:L,distance:M}},j.aliasPixel=function(A){return A%2===0?0:0.5}),O=(j.splineCurve=function(C,B,M,L){var R=Math.sqrt(Math.pow(B.x-C.x,2)+Math.pow(B.y-C.y,2)),P=Math.sqrt(Math.pow(M.x-B.x,2)+Math.pow(M.y-B.y,2)),A=L*R/(R+P),F=L*P/(R+P);return{inner:{x:B.x-A*(M.x-C.x),y:B.y-A*(M.y-C.y)},outer:{x:B.x+F*(M.x-C.x),y:B.y+F*(M.y-C.y)}}},j.calculateOrderOfMagnitude=function(A){return Math.floor(Math.log(A)/Math.LN10)}),q=(j.calculateScaleRange=function(x,P,W,y,F){var C=2,k=Math.floor(P/(1.5*W)),R=C>=k,L=AL(x),A=AG(x);L===A&&(L+=0.5,A>=0.5&&!y?A-=0.5:L+=0.5);for(var g=Math.abs(L-A),w=O(g),b=Math.ceil(L/(1*Math.pow(10,w)))*Math.pow(10,w),B=y?0:Math.floor(A/(1*Math.pow(10,w)))*Math.pow(10,w),T=b-B,m=Math.pow(10,w),M=Math.round(T/m);(M>k||k>2*M)&&!R;){if(M>k){m*=2,M=Math.round(T/m),M%1!==0&&(R=!0)}else{if(F&&w>=0){if(m/2%1!==0){break}m/=2,M=Math.round(T/m)}else{m/=2,M=Math.round(T/m)}}}return R&&(M=C,m=T/M),{steps:M,stepValue:m,min:B,max:B+M*m}},j.template=function(B,A){function F(M,L){var P=/\W/.test(M)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+M.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):C[M]=C[M];return L?P(L):P}if(B instanceof Function){return B(A)}var C={};return F(B,A)}),U=(j.generateLabels=function(B,A,F,C){var L=new Array(A);return labelTemplateString&&AF(L,function(M,P){L[P]=q(B,{value:F+C*(P+1)})}),L},j.easingEffects={linear:function(A){return A},easeInQuad:function(A){return A*A},easeOutQuad:function(A){return -1*A*(A-2)},easeInOutQuad:function(A){return(A/=0.5)<1?0.5*A*A:-0.5*(--A*(A-2)-1)},easeInCubic:function(A){return A*A*A},easeOutCubic:function(A){return 1*((A=A/1-1)*A*A+1)},easeInOutCubic:function(A){return(A/=0.5)<1?0.5*A*A*A:0.5*((A-=2)*A*A+2)},easeInQuart:function(A){return A*A*A*A},easeOutQuart:function(A){return -1*((A=A/1-1)*A*A*A-1)},easeInOutQuart:function(A){return(A/=0.5)<1?0.5*A*A*A*A:-0.5*((A-=2)*A*A*A-2)},easeInQuint:function(A){return 1*(A/=1)*A*A*A*A},easeOutQuint:function(A){return 1*((A=A/1-1)*A*A*A*A+1)},easeInOutQuint:function(A){return(A/=0.5)<1?0.5*A*A*A*A*A:0.5*((A-=2)*A*A*A*A+2)},easeInSine:function(A){return -1*Math.cos(A/1*(Math.PI/2))+1},easeOutSine:function(A){return 1*Math.sin(A/1*(Math.PI/2))},easeInOutSine:function(A){return -0.5*(Math.cos(Math.PI*A/1)-1)},easeInExpo:function(A){return 0===A?1:1*Math.pow(2,10*(A/1-1))},easeOutExpo:function(A){return 1===A?1:1*(-Math.pow(2,-10*A/1)+1)},easeInOutExpo:function(A){return 0===A?0:1===A?1:(A/=0.5)<1?0.5*Math.pow(2,10*(A-1)):0.5*(-Math.pow(2,-10*--A)+2)},easeInCirc:function(A){return A>=1?A:-1*(Math.sqrt(1-(A/=1)*A)-1)},easeOutCirc:function(A){return 1*Math.sqrt(1-(A=A/1-1)*A)},easeInOutCirc:function(A){return(A/=0.5)<1?-0.5*(Math.sqrt(1-A*A)-1):0.5*(Math.sqrt(1-(A-=2)*A)+1)},easeInElastic:function(B){var A=1.70158,F=0,C=1;return 0===B?0:1==(B/=1)?1:(F||(F=0.3),C<Math.abs(1)?(C=1,A=F/4):A=F/(2*Math.PI)*Math.asin(1/C),-(C*Math.pow(2,10*(B-=1))*Math.sin(2*(1*B-A)*Math.PI/F)))},easeOutElastic:function(B){var A=1.70158,F=0,C=1;return 0===B?0:1==(B/=1)?1:(F||(F=0.3),C<Math.abs(1)?(C=1,A=F/4):A=F/(2*Math.PI)*Math.asin(1/C),C*Math.pow(2,-10*B)*Math.sin(2*(1*B-A)*Math.PI/F)+1)},easeInOutElastic:function(B){var A=1.70158,F=0,C=1;return 0===B?0:2==(B/=0.5)?1:(F||(F=0.3*1.5),C<Math.abs(1)?(C=1,A=F/4):A=F/(2*Math.PI)*Math.asin(1/C),1>B?-0.5*C*Math.pow(2,10*(B-=1))*Math.sin(2*(1*B-A)*Math.PI/F):C*Math.pow(2,-10*(B-=1))*Math.sin(2*(1*B-A)*Math.PI/F)*0.5+1)},easeInBack:function(B){var A=1.70158;return 1*(B/=1)*B*((A+1)*B-A)},easeOutBack:function(B){var A=1.70158;return 1*((B=B/1-1)*B*((A+1)*B+A)+1)},easeInOutBack:function(B){var A=1.70158;return(B/=0.5)<1?0.5*B*B*(((A*=1.525)+1)*B-A):0.5*((B-=2)*B*(((A*=1.525)+1)*B+A)+2)},easeInBounce:function(A){return 1-U.easeOutBounce(1-A)},easeOutBounce:function(A){return(A/=1)<1/2.75?7.5625*A*A:2/2.75>A?1*(7.5625*(A-=1.5/2.75)*A+0.75):2.5/2.75>A?1*(7.5625*(A-=2.25/2.75)*A+0.9375):1*(7.5625*(A-=2.625/2.75)*A+0.984375)},easeInOutBounce:function(A){return 0.5>A?0.5*U.easeInBounce(2*A):0.5*U.easeOutBounce(2*A-1)+0.5}}),AQ=j.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(A){return window.setTimeout(A,1000/60)}}(),I=j.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(A){return window.clearTimeout(A,1000/60)}}(),K=(j.animationLoop=function(R,F,M,S,B,A){var P=0,L=U[M]||U.linear,C=function(){P++;var W=P/F,T=L(W);R.call(A,T,W,P),S.call(A,T,W),F>P?A.animationFrame=AQ(C):B.apply(A)};AQ(C)},j.getRelativePosition=function(B){var A,F,C=B.originalEvent||B,M=B.currentTarget||B.srcElement,L=M.getBoundingClientRect();return C.touches?(A=C.touches[0].clientX-L.left,F=C.touches[0].clientY-L.top):(A=C.clientX-L.left,F=C.clientY-L.top),{x:A,y:F}},j.addEvent=function(B,A,C){B.addEventListener?B.addEventListener(A,C):B.attachEvent?B.attachEvent("on"+A,C):B["on"+A]=C}),AI=j.removeEvent=function(B,A,C){B.removeEventListener?B.removeEventListener(A,C,!1):B.detachEvent?B.detachEvent("on"+A,C):B["on"+A]=AP},X=(j.bindEvents=function(B,A,C){B.events||(B.events={}),AF(A,function(F){B.events[F]=function(){C.apply(B,arguments)},K(B.chart.canvas,F,B.events[F])})},j.unbindEvents=function(B,A){AF(A,function(C,F){AI(B.chart.canvas,F,C)})}),H=j.getMaximumWidth=function(B){var A=B.parentNode;return A.clientWidth},E=j.getMaximumHeight=function(B){var A=B.parentNode;return A.clientHeight},AC=(j.getMaximumSize=j.getMaximumWidth,j.retinaScale=function(B){var A=B.ctx,F=B.canvas.width,C=B.canvas.height;window.devicePixelRatio&&(A.canvas.style.width=F+"px",A.canvas.style.height=C+"px",A.canvas.height=C*window.devicePixelRatio,A.canvas.width=F*window.devicePixelRatio,A.scale(window.devicePixelRatio,window.devicePixelRatio))}),J=j.clear=function(A){A.ctx.clearRect(0,0,A.width,A.height)},D=j.fontString=function(B,A,C){return A+" "+B+"px "+C},N=j.longestText=function(B,A,F){B.font=A;var C=0;return AF(F,function(L){var M=B.measureText(L).width;C=M>C?M:C}),C},AB=j.drawRoundedRectangle=function(B,A,F,C,M,L){B.beginPath(),B.moveTo(A+L,F),B.lineTo(A+C-L,F),B.quadraticCurveTo(A+C,F,A+C,F+L),B.lineTo(A+C,F+M-L),B.quadraticCurveTo(A+C,F+M,A+C-L,F+M),B.lineTo(A+L,F+M),B.quadraticCurveTo(A,F+M,A,F+M-L),B.lineTo(A,F+L),B.quadraticCurveTo(A,F,A+L,F),B.closePath()};AN.instances={},AN.Type=function(B,A,C){this.options=A,this.chart=C,this.id=Y(),AN.instances[this.id]=this,A.responsive&&this.resize(),this.initialize.call(this,B)},AR(AN.Type.prototype,{initialize:function(){return this},clear:function(){return J(this.chart),this},stop:function(){return I(this.animationFrame),this},resize:function(B){this.stop();var A=this.chart.canvas,F=H(this.chart.canvas),C=this.options.maintainAspectRatio?F/this.chart.aspectRatio:E(this.chart.canvas);return A.width=this.chart.width=F,A.height=this.chart.height=C,AC(this.chart),"function"==typeof B&&B.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:AP,render:function(A){return A&&this.reflow(),this.options.animation&&!A?j.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return q(this.options.legendTemplate,this)},destroy:function(){this.clear(),X(this,this.events);var A=this.chart.canvas;A.width=this.chart.width,A.height=this.chart.height,A.style.removeProperty?(A.style.removeProperty("width"),A.style.removeProperty("height")):(A.style.removeAttribute("width"),A.style.removeAttribute("height")),delete AN.instances[this.id]},showTooltip:function(S,C){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var B=function(W){var T=!1;return W.length!==this.activeElements.length?T=!0:(AF(W,function(a,b){a!==this.activeElements[b]&&(T=!0)},this),T)}.call(this,S);if(B||C){if(this.activeElements=S,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),S.length>0){if(this.datasets&&this.datasets.length>1){for(var P,F,A=this.datasets.length-1;A>=0&&(P=this.datasets[A].points||this.datasets[A].bars||this.datasets[A].segments,F=AH(P,S[0]),-1===F);A--){}var M=[],R=[],L=function(){var c,b,f,h,g,W=[],T=[],d=[];return j.each(this.datasets,function(a){c=a.points||a.bars||a.segments,c[F]&&c[F].hasValue()&&W.push(c[F])}),j.each(W,function(a){T.push(a.x),d.push(a.y),M.push(j.template(this.options.multiTooltipTemplate,a)),R.push({fill:a._saved.fillColor||a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),g=AG(d),f=AL(d),h=AG(T),b=AL(T),{x:h>this.chart.width/2?h:b,y:(g+f)/2}}.call(this,F);new AN.MultiTooltip({x:L.x,y:L.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:M,legendColors:R,legendColorBackground:this.options.multiTooltipKeyBackground,title:S[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else{AF(S,function(W){var T=W.tooltipPosition();new AN.Tooltip({x:Math.round(T.x),y:Math.round(T.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:q(this.options.tooltipTemplate,W),chart:this.chart,custom:this.options.customTooltips}).draw()},this)}}return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),AN.Type.extend=function(C){var B=this,F=function(){return B.apply(this,arguments)};if(F.prototype=AE(B.prototype),AR(F.prototype,C),F.extend=AN.Type.extend,C.name||B.prototype.name){var L=C.name||B.prototype.name,A=AN.defaults[B.prototype.name]?AE(AN.defaults[B.prototype.name]):{};AN.defaults[L]=AR(A,C.defaults),AN.types[L]=F,AN.prototype[L]=function(P,M){var R=AK(AN.defaults.global,AN.defaults[L],M||{});return new F(P,R,this)}}else{AO("Name not provided for this chart, so it hasn't been registered")}return B},AN.Element=function(A){AR(this,A),this.initialize.apply(this,arguments),this.save()},AR(AN.Element.prototype,{initialize:function(){},restore:function(A){return A?AF(A,function(B){this[B]=this._saved[B]},this):AR(this,this._saved),this},save:function(){return this._saved=AE(this),delete this._saved._saved,this},update:function(A){return AF(A,function(C,B){this._saved[B]=this[B],this[B]=C},this),this},transition:function(B,A){return AF(B,function(C,F){this[F]=(C-this._saved[F])*A+this._saved[F]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return AM(this.value)}}),AN.Element.extend=AA,AN.Point=AN.Element.extend({display:!0,inRange:function(B,A){var C=this.hitDetectionRadius+this.radius;return Math.pow(B-this.x,2)+Math.pow(A-this.y,2)<Math.pow(C,2)},draw:function(){if(this.display){var A=this.ctx;A.beginPath(),A.arc(this.x,this.y,this.radius,0,2*Math.PI),A.closePath(),A.strokeStyle=this.strokeColor,A.lineWidth=this.strokeWidth,A.fillStyle=this.fillColor,A.fill(),A.stroke()}}}),AN.Arc=AN.Element.extend({inRange:function(B,A){var C=j.getAngleFromPoint(this,{x:B,y:A}),L=C.angle>=this.startAngle&&C.angle<=this.endAngle,F=C.distance>=this.innerRadius&&C.distance<=this.outerRadius;return L&&F},tooltipPosition:function(){var B=this.startAngle+(this.endAngle-this.startAngle)/2,A=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(B)*A,y:this.y+Math.sin(B)*A}},draw:function(B){var A=this.ctx;A.beginPath(),A.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),A.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),A.closePath(),A.strokeStyle=this.strokeColor,A.lineWidth=this.strokeWidth,A.fillStyle=this.fillColor,A.fill(),A.lineJoin="bevel",this.showStroke&&A.stroke()}}),AN.Rectangle=AN.Element.extend({draw:function(){var B=this.ctx,A=this.width/2,F=this.x-A,C=this.x+A,M=this.base-(this.base-this.y),L=this.strokeWidth/2;this.showStroke&&(F+=L,C-=L,M+=L),B.beginPath(),B.fillStyle=this.fillColor,B.strokeStyle=this.strokeColor,B.lineWidth=this.strokeWidth,B.moveTo(F,this.base),B.lineTo(F,M),B.lineTo(C,M),B.lineTo(C,this.base),B.fill(),this.showStroke&&B.stroke()},height:function(){return this.base-this.y},inRange:function(B,A){return B>=this.x-this.width/2&&B<=this.x+this.width/2&&A>=this.y&&A<=this.base}}),AN.Tooltip=AN.Element.extend({draw:function(){var C=this.chart.ctx;C.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var B=this.caretPadding=2,L=C.measureText(this.text).width+2*this.xPadding,F=this.fontSize+2*this.yPadding,P=F+this.caretHeight+B;this.x+L/2>this.chart.width?this.xAlign="left":this.x-L/2<0&&(this.xAlign="right"),this.y-P<0&&(this.yAlign="below");var M=this.x-L/2,A=this.y-P;if(C.fillStyle=this.fillColor,this.custom){this.custom(this)}else{switch(this.yAlign){case"above":C.beginPath(),C.moveTo(this.x,this.y-B),C.lineTo(this.x+this.caretHeight,this.y-(B+this.caretHeight)),C.lineTo(this.x-this.caretHeight,this.y-(B+this.caretHeight)),C.closePath(),C.fill();break;case"below":A=this.y+B+this.caretHeight,C.beginPath(),C.moveTo(this.x,this.y+B),C.lineTo(this.x+this.caretHeight,this.y+B+this.caretHeight),C.lineTo(this.x-this.caretHeight,this.y+B+this.caretHeight),C.closePath(),C.fill()}switch(this.xAlign){case"left":M=this.x-L+(this.cornerRadius+this.caretHeight);break;case"right":M=this.x-(this.cornerRadius+this.caretHeight)}AB(C,M,A,L,F,this.cornerRadius),C.fill(),C.fillStyle=this.textColor,C.textAlign="center",C.textBaseline="middle",C.fillText(this.text,M+L/2,A+F/2)}}}),AN.MultiTooltip=AN.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var B=this.ctx.measureText(this.title).width,A=N(this.ctx,this.font,this.labels)+this.fontSize+3,F=AL([A,B]);this.width=F+2*this.xPadding;var C=this.height/2;this.y-C<0?this.y=C:this.y+C>this.chart.height&&(this.y=this.chart.height-C),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(B){var A=this.y-this.height/2+this.yPadding,C=B-1;return 0===B?A+this.titleFontSize/2:A+(1.5*this.fontSize*C+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom){this.custom(this)}else{AB(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var A=this.ctx;A.fillStyle=this.fillColor,A.fill(),A.closePath(),A.textAlign="left",A.textBaseline="middle",A.fillStyle=this.titleTextColor,A.font=this.titleFont,A.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),A.font=this.font,j.each(this.labels,function(B,C){A.fillStyle=this.textColor,A.fillText(B,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(C+1)),A.fillStyle=this.legendColorBackground,A.fillRect(this.x+this.xPadding,this.getLineHeight(C+1)-this.fontSize/2,this.fontSize,this.fontSize),A.fillStyle=this.legendColors[C].fill,A.fillRect(this.x+this.xPadding,this.getLineHeight(C+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),AN.Scale=AN.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var B=V(this.stepValue),A=0;A<=this.steps;A++){this.yLabels.push(q(this.templateString,{value:(this.min+A*this.stepValue).toFixed(B)}))}this.yLabelWidth=this.display&&this.showLabels?N(this.ctx,this.font,this.yLabels):0},addXLabel:function(A){this.xLabels.push(A),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var B,A=this.endPoint-this.startPoint;for(this.calculateYRange(A),this.buildYLabels(),this.calculateXLabelRotation();A>this.endPoint-this.startPoint;){A=this.endPoint-this.startPoint,B=this.yLabelWidth,this.calculateYRange(A),this.buildYLabels(),B<this.yLabelWidth&&this.calculateXLabelRotation()}},calculateXLabelRotation:function(){this.ctx.font=this.font;var C,B,L=this.ctx.measureText(this.xLabels[0]).width,F=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=F/2+3,this.xScalePaddingLeft=L/2>this.yLabelWidth+10?L/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var P,M=N(this.ctx,this.font,this.xLabels);this.xLabelWidth=M;for(var A=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>A&&0===this.xLabelRotation||this.xLabelWidth>A&&this.xLabelRotation<=90&&this.xLabelRotation>0;){P=Math.cos(G(this.xLabelRotation)),C=P*L,B=P*F,C+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=C+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=P*M}this.xLabelRotation>0&&(this.endPoint-=Math.sin(G(this.xLabelRotation))*M+3)}else{this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding}},calculateYRange:AP,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(B){var A=this.drawingArea()/(this.min-this.max);return this.endPoint-A*(B-this.min)},calculateX:function(B){var A=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),F=A/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),C=F*B+this.xScalePaddingLeft;return this.offsetGridLines&&(C+=F/2),Math.round(C)},update:function(A){j.extend(this,A),this.fit()},draw:function(){var B=this.ctx,A=(this.endPoint-this.startPoint)/this.steps,C=Math.round(this.xScalePaddingLeft);this.display&&(B.fillStyle=this.textColor,B.font=this.font,AF(this.yLabels,function(R,P){var L=this.endPoint-A*P,M=Math.round(L),F=this.showHorizontalLines;B.textAlign="right",B.textBaseline="middle",this.showLabels&&B.fillText(R,C-10,L),0!==P||F||(F=!0),F&&B.beginPath(),P>0?(B.lineWidth=this.gridLineWidth,B.strokeStyle=this.gridLineColor):(B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor),M+=j.aliasPixel(B.lineWidth),F&&(B.moveTo(C,M),B.lineTo(this.width,M),B.stroke(),B.closePath()),B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor,B.beginPath(),B.moveTo(C-5,M),B.lineTo(C,M),B.stroke(),B.closePath()},this),AF(this.xLabels,function(L,P){var M=this.calculateX(P)+Q(this.lineWidth),S=this.calculateX(P-(this.offsetGridLines?0.5:0))+Q(this.lineWidth),R=this.xLabelRotation>0,F=this.showVerticalLines;0!==P||F||(F=!0),F&&B.beginPath(),P>0?(B.lineWidth=this.gridLineWidth,B.strokeStyle=this.gridLineColor):(B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor),F&&(B.moveTo(S,this.endPoint),B.lineTo(S,this.startPoint-3),B.stroke(),B.closePath()),B.lineWidth=this.lineWidth,B.strokeStyle=this.lineColor,B.beginPath(),B.moveTo(S,this.endPoint),B.lineTo(S,this.endPoint+5),B.stroke(),B.closePath(),B.save(),B.translate(M,R?this.endPoint+12:this.endPoint+8),B.rotate(-1*G(this.xLabelRotation)),B.font=this.font,B.textAlign=R?"right":"center",B.textBaseline=R?"middle":"top",B.fillText(L,0,0),B.restore()},this))}}),AN.RadialScale=AN.Element.extend({initialize:function(){this.size=AG([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(B){var A=this.drawingArea/(this.max-this.min);return(B-this.min)*A},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var B=V(this.stepValue),A=0;A<=this.steps;A++){this.yLabels.push(q(this.templateString,{value:(this.min+A*this.stepValue).toFixed(B)}))}},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var k,M,S,m,F,C,b,P,L,A,W,f,T=AG([this.height/2-this.pointLabelFontSize-5,this.width/2]),B=this.width,R=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),M=0;M<this.valuesCount;M++){k=this.getPointPosition(M,T),S=this.ctx.measureText(q(this.templateString,{value:this.labels[M]})).width+5,0===M||M===this.valuesCount/2?(m=S/2,k.x+m>B&&(B=k.x+m,F=M),k.x-m<R&&(R=k.x-m,b=M)):M<this.valuesCount/2?k.x+S>B&&(B=k.x+S,F=M):M>this.valuesCount/2&&k.x-S<R&&(R=k.x-S,b=M)}L=R,A=Math.ceil(B-this.width),C=this.getIndexAngle(F),P=this.getIndexAngle(b),W=A/Math.sin(C+Math.PI/2),f=L/Math.sin(P+Math.PI/2),W=AM(W)?W:0,f=AM(f)?f:0,this.drawingArea=T-(f+W)/2,this.setCenterPoint(f,W)},setCenterPoint:function(B,A){var F=this.width-A-this.drawingArea,C=B+this.drawingArea;this.xCenter=(C+F)/2,this.yCenter=this.height/2},getIndexAngle:function(B){var A=2*Math.PI/this.valuesCount;return B*A-Math.PI/2},getPointPosition:function(B,A){var C=this.getIndexAngle(B);return{x:Math.cos(C)*A+this.xCenter,y:Math.sin(C)*A+this.yCenter}},draw:function(){if(this.display){var R=this.ctx;if(AF(this.yLabels,function(W,d){if(d>0){var c,g=d*(this.drawingArea/this.steps),f=this.yCenter-g;if(this.lineWidth>0){if(R.strokeStyle=this.lineColor,R.lineWidth=this.lineWidth,this.lineArc){R.beginPath(),R.arc(this.xCenter,this.yCenter,g,0,2*Math.PI),R.closePath(),R.stroke()}else{R.beginPath();for(var T=0;T<this.valuesCount;T++){c=this.getPointPosition(T,this.calculateCenterOffset(this.min+d*this.stepValue)),0===T?R.moveTo(c.x,c.y):R.lineTo(c.x,c.y)}R.closePath(),R.stroke()}}if(this.showLabels){if(R.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var b=R.measureText(W).width;R.fillStyle=this.backdropColor,R.fillRect(this.xCenter-b/2-this.backdropPaddingX,f-this.fontSize/2-this.backdropPaddingY,b+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}R.textAlign="center",R.textBaseline="middle",R.fillStyle=this.fontColor,R.fillText(W,this.xCenter,f)}}},this),!this.lineArc){R.lineWidth=this.angleLineWidth,R.strokeStyle=this.angleLineColor;for(var F=this.valuesCount-1;F>=0;F--){if(this.angleLineWidth>0){var M=this.getPointPosition(F,this.calculateCenterOffset(this.max));R.beginPath(),R.moveTo(this.xCenter,this.yCenter),R.lineTo(M.x,M.y),R.stroke(),R.closePath()}var S=this.getPointPosition(F,this.calculateCenterOffset(this.max)+5);R.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),R.fillStyle=this.pointLabelFontColor;var B=this.labels.length,P=this.labels.length/2,L=P/2,C=L>F||F>B-L,A=F===L||F===B-L;R.textAlign=0===F?"center":F===P?"center":P>F?"left":"right",R.textBaseline=A?"middle":C?"bottom":"top",R.fillText(this.labels[F],S.x,S.y)}}}}}),j.addEvent(window,"resize",function(){var A;return function(){clearTimeout(A),A=setTimeout(function(){AF(AN.instances,function(B){B.options.responsive&&B.resize(B.render,!0)})},50)}}()),AD?define(function(){return AN}):"object"==typeof module&&module.exports&&(module.exports=AN),Z.Chart=AN,AN.noConflict=function(){return Z.Chart=AJ,AN}}).call(this),function(){var B=this,A=B.Chart,D=A.helpers,C={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};A.Type.extend({name:"Bar",defaults:C,initialize:function(E){var F=this.options;this.ScaleClass=A.Scale.extend({offsetGridLines:!0,calculateBarX:function(I,H,J){var L=this.calculateBaseWidth(),K=this.calculateX(J)-L/2,G=this.calculateBarWidth(I);return K+G*H+H*F.barDatasetSpacing+G/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*F.barValueSpacing},calculateBarWidth:function(H){var G=this.calculateBaseWidth()-(H-1)*F.barDatasetSpacing;return G/H}}),this.datasets=[],this.options.showTooltips&&D.bindEvents(this,this.options.tooltipEvents,function(H){var G="mouseout"!==H.type?this.getBarsAtEvent(H):[];this.eachBars(function(I){I.restore(["fillColor","strokeColor"])}),D.each(G,function(I){I.fillColor=I.highlightFill,I.strokeColor=I.highlightStroke}),this.showTooltip(G)}),this.BarClass=A.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),D.each(E.datasets,function(G){var H={label:G.label||null,fillColor:G.fillColor,strokeColor:G.strokeColor,bars:[]};this.datasets.push(H),D.each(G.data,function(I,J){H.bars.push(new this.BarClass({value:I,label:E.labels[J],datasetLabel:G.label,strokeColor:G.strokeColor,fillColor:G.fillColor,highlightFill:G.highlightFill||G.fillColor,highlightStroke:G.highlightStroke||G.strokeColor}))},this)},this),this.buildScale(E.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(H,G,I){D.extend(H,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,I,G),y:this.scale.endPoint}),H.save()},this),this.render()},update:function(){this.scale.update(),D.each(this.activeElements,function(E){E.restore(["fillColor","strokeColor"])}),this.eachBars(function(E){E.save()}),this.render()},eachBars:function(E){D.each(this.datasets,function(F,G){D.each(F.bars,E,this,G)},this)},getBarsAtEvent:function(G){for(var F,H=[],J=D.getRelativePosition(G),I=function(K){H.push(K.bars[F])},E=0;E<this.datasets.length;E++){for(F=0;F<this.datasets[E].bars.length;F++){if(this.datasets[E].bars[F].inRange(J.x,J.y)){return D.each(this.datasets,I),H}}}return H},buildScale:function(F){var E=this,G=function(){var I=[];return E.eachBars(function(J){I.push(J.value)}),I},H={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:F.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(J){var I=D.calculateScaleRange(G(),J,this.fontSize,this.beginAtZero,this.integersOnly);D.extend(this,I)},xLabels:F,font:D.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&D.extend(H,{calculateYRange:D.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(H)},addData:function(F,E){D.each(F,function(G,H){this.datasets[H].bars.push(new this.BarClass({value:G,label:E,x:this.scale.calculateBarX(this.datasets.length,H,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[H].strokeColor,fillColor:this.datasets[H].fillColor}))},this),this.scale.addXLabel(E),this.update()},removeData:function(){this.scale.removeXLabel(),D.each(this.datasets,function(E){E.bars.shift()},this),this.update()},reflow:function(){D.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var E=D.extend({height:this.chart.height,width:this.chart.width});this.scale.update(E)},draw:function(F){var E=F||1;this.clear();this.chart.ctx;this.scale.draw(E),D.each(this.datasets,function(G,H){D.each(G.bars,function(I,J){I.hasValue()&&(I.base=this.scale.endPoint,I.transition({x:this.scale.calculateBarX(this.datasets.length,H,J),y:this.scale.calculateY(I.value),width:this.scale.calculateBarWidth(this.datasets.length)},E).draw())},this)},this)}})}.call(this),function(){var B=this,A=B.Chart,D=A.helpers,C={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};A.Type.extend({name:"Doughnut",defaults:C,initialize:function(E){this.segments=[],this.outerRadius=(D.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=A.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&D.bindEvents(this,this.options.tooltipEvents,function(G){var F="mouseout"!==G.type?this.getSegmentsAtEvent(G):[];D.each(this.segments,function(H){H.restore(["fillColor"])}),D.each(F,function(H){H.fillColor=H.highlightColor}),this.showTooltip(F)}),this.calculateTotal(E),D.each(E,function(G,F){this.addData(G,F,!0)},this),this.render()},getSegmentsAtEvent:function(F){var E=[],G=D.getRelativePosition(F);return D.each(this.segments,function(H){H.inRange(G.x,G.y)&&E.push(H)},this),E},addData:function(F,E,H){var G=E||this.segments.length;this.segments.splice(G,0,new this.SegmentArc({value:F.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:F.color,highlightColor:F.highlight||F.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(F.value),label:F.label})),H||(this.reflow(),this.update())},calculateCircumference:function(E){return 2*Math.PI*(Math.abs(E)/this.total)},calculateTotal:function(E){this.total=0,D.each(E,function(F){this.total+=Math.abs(F.value)},this)},update:function(){this.calculateTotal(this.segments),D.each(this.activeElements,function(E){E.restore(["fillColor"])}),D.each(this.segments,function(E){E.save()}),this.render()},removeData:function(F){var E=D.isNumber(F)?F:this.segments.length-1;this.segments.splice(E,1),this.reflow(),this.update()},reflow:function(){D.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(D.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,D.each(this.segments,function(E){E.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(F){var E=F?F:1;this.clear(),D.each(this.segments,function(G,H){G.transition({circumference:this.calculateCircumference(G.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},E),G.endAngle=G.startAngle+G.circumference,G.draw(),0===H&&(G.startAngle=1.5*Math.PI),H<this.segments.length-1&&(this.segments[H+1].startAngle=G.endAngle)},this)}}),A.types.Doughnut.extend({name:"Pie",defaults:D.merge(C,{percentageInnerCutout:0})})}.call(this),function(){var B=this,A=B.Chart,D=A.helpers,C={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:0.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};A.Type.extend({name:"Line",defaults:C,initialize:function(E){this.PointClass=A.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(F){return Math.pow(F-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&D.bindEvents(this,this.options.tooltipEvents,function(G){var F="mouseout"!==G.type?this.getPointsAtEvent(G):[];this.eachPoints(function(H){H.restore(["fillColor","strokeColor"])}),D.each(F,function(H){H.fillColor=H.highlightFill,H.strokeColor=H.highlightStroke}),this.showTooltip(F)}),D.each(E.datasets,function(F){var G={label:F.label||null,fillColor:F.fillColor,strokeColor:F.strokeColor,pointColor:F.pointColor,pointStrokeColor:F.pointStrokeColor,points:[]};this.datasets.push(G),D.each(F.data,function(H,I){G.points.push(new this.PointClass({value:H,label:E.labels[I],datasetLabel:F.label,strokeColor:F.pointStrokeColor,fillColor:F.pointColor,highlightFill:F.pointHighlightFill||F.pointColor,highlightStroke:F.pointHighlightStroke||F.pointStrokeColor}))},this),this.buildScale(E.labels),this.eachPoints(function(I,H){D.extend(I,{x:this.scale.calculateX(H),y:this.scale.endPoint}),I.save()},this)},this),this.render()},update:function(){this.scale.update(),D.each(this.activeElements,function(E){E.restore(["fillColor","strokeColor"])}),this.eachPoints(function(E){E.save()}),this.render()},eachPoints:function(E){D.each(this.datasets,function(F){D.each(F.points,E,this)},this)},getPointsAtEvent:function(F){var E=[],G=D.getRelativePosition(F);return D.each(this.datasets,function(H){D.each(H.points,function(I){I.inRange(G.x,G.y)&&E.push(I)})},this),E},buildScale:function(E){var F=this,H=function(){var I=[];return F.eachPoints(function(J){I.push(J.value)}),I},G={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:E.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(J){var I=D.calculateScaleRange(H(),J,this.fontSize,this.beginAtZero,this.integersOnly);D.extend(this,I)},xLabels:E,font:D.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&D.extend(G,{calculateYRange:D.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new A.Scale(G)},addData:function(F,E){D.each(F,function(G,H){this.datasets[H].points.push(new this.PointClass({value:G,label:E,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[H].pointStrokeColor,fillColor:this.datasets[H].pointColor}))},this),this.scale.addXLabel(E),this.update()},removeData:function(){this.scale.removeXLabel(),D.each(this.datasets,function(E){E.points.shift()},this),this.update()},reflow:function(){var E=D.extend({height:this.chart.height,width:this.chart.width});this.scale.update(E)},draw:function(G){var F=G||1;this.clear();var H=this.chart.ctx,J=function(K){return null!==K.value},I=function(L,K,M){return D.findNextWhere(K,J,M)||L},E=function(L,K,M){return D.findPreviousWhere(K,J,M)||L};this.scale.draw(F),D.each(this.datasets,function(K){var L=D.where(K.points,J);D.each(K.points,function(M,N){M.hasValue()&&M.transition({y:this.scale.calculateY(M.value),x:this.scale.calculateX(N)},F)},this),this.options.bezierCurve&&D.each(L,function(N,M){var O=M>0&&M<L.length-1?this.options.bezierCurveTension:0;N.controlPoints=D.splineCurve(E(N,L,M),N,I(N,L,M),O),N.controlPoints.outer.y>this.scale.endPoint?N.controlPoints.outer.y=this.scale.endPoint:N.controlPoints.outer.y<this.scale.startPoint&&(N.controlPoints.outer.y=this.scale.startPoint),N.controlPoints.inner.y>this.scale.endPoint?N.controlPoints.inner.y=this.scale.endPoint:N.controlPoints.inner.y<this.scale.startPoint&&(N.controlPoints.inner.y=this.scale.startPoint)},this),H.lineWidth=this.options.datasetStrokeWidth,H.strokeStyle=K.strokeColor,H.beginPath(),D.each(L,function(N,M){if(0===M){H.moveTo(N.x,N.y)}else{if(this.options.bezierCurve){var O=E(N,L,M);H.bezierCurveTo(O.controlPoints.outer.x,O.controlPoints.outer.y,N.controlPoints.inner.x,N.controlPoints.inner.y,N.x,N.y)}else{H.lineTo(N.x,N.y)}}},this),H.stroke(),this.options.datasetFill&&L.length>0&&(H.lineTo(L[L.length-1].x,this.scale.endPoint),H.lineTo(L[0].x,this.scale.endPoint),H.fillStyle=K.fillColor,H.closePath(),H.fill()),D.each(L,function(M){M.draw()})},this)}})}.call(this),function(){var B=this,A=B.Chart,D=A.helpers,C={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};A.Type.extend({name:"PolarArea",defaults:C,initialize:function(E){this.segments=[],this.SegmentArc=A.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new A.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:E.length}),this.updateScaleRange(E),this.scale.update(),D.each(E,function(G,F){this.addData(G,F,!0)},this),this.options.showTooltips&&D.bindEvents(this,this.options.tooltipEvents,function(G){var F="mouseout"!==G.type?this.getSegmentsAtEvent(G):[];D.each(this.segments,function(H){H.restore(["fillColor"])}),D.each(F,function(H){H.fillColor=H.highlightColor}),this.showTooltip(F)}),this.render()},getSegmentsAtEvent:function(F){var E=[],G=D.getRelativePosition(F);return D.each(this.segments,function(H){H.inRange(G.x,G.y)&&E.push(H)},this),E},addData:function(F,E,H){var G=E||this.segments.length;this.segments.splice(G,0,new this.SegmentArc({fillColor:F.color,highlightColor:F.highlight||F.color,label:F.label,value:F.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(F.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),H||(this.reflow(),this.update())},removeData:function(F){var E=D.isNumber(F)?F:this.segments.length-1;this.segments.splice(E,1),this.reflow(),this.update()},calculateTotal:function(E){this.total=0,D.each(E,function(F){this.total+=F.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(F){var E=[];D.each(F,function(H){E.push(H.value)});var G=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:D.calculateScaleRange(E,D.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);D.extend(this.scale,G,{size:D.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),D.each(this.segments,function(E){E.save()}),this.reflow(),this.render()},reflow:function(){D.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),D.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),D.each(this.segments,function(E){E.update({outerRadius:this.scale.calculateCenterOffset(E.value)})},this)},draw:function(F){var E=F||1;this.clear(),D.each(this.segments,function(G,H){G.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(G.value)},E),G.endAngle=G.startAngle+G.circumference,0===H&&(G.startAngle=1.5*Math.PI),H<this.segments.length-1&&(this.segments[H+1].startAngle=G.endAngle),G.draw()},this),this.scale.draw()}})}.call(this),function(){var B=this,A=B.Chart,C=A.helpers;A.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(D){this.PointClass=A.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(D),this.options.showTooltips&&C.bindEvents(this,this.options.tooltipEvents,function(F){var E="mouseout"!==F.type?this.getPointsAtEvent(F):[];this.eachPoints(function(G){G.restore(["fillColor","strokeColor"])}),C.each(E,function(G){G.fillColor=G.highlightFill,G.strokeColor=G.highlightStroke}),this.showTooltip(E)}),C.each(D.datasets,function(E){var F={label:E.label||null,fillColor:E.fillColor,strokeColor:E.strokeColor,pointColor:E.pointColor,pointStrokeColor:E.pointStrokeColor,points:[]};this.datasets.push(F),C.each(E.data,function(G,I){var H;this.scale.animation||(H=this.scale.getPointPosition(I,this.scale.calculateCenterOffset(G))),F.points.push(new this.PointClass({value:G,label:D.labels[I],datasetLabel:E.label,x:this.options.animation?this.scale.xCenter:H.x,y:this.options.animation?this.scale.yCenter:H.y,strokeColor:E.pointStrokeColor,fillColor:E.pointColor,highlightFill:E.pointHighlightFill||E.pointColor,highlightStroke:E.pointHighlightStroke||E.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(D){C.each(this.datasets,function(E){C.each(E.points,D,this)},this)},getPointsAtEvent:function(F){var E=C.getRelativePosition(F),G=C.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},E),I=2*Math.PI/this.scale.valuesCount,H=Math.round((G.angle-1.5*Math.PI)/I),D=[];return(H>=this.scale.valuesCount||0>H)&&(H=0),G.distance<=this.scale.drawingArea&&C.each(this.datasets,function(J){D.push(J.points[H])}),D},buildScale:function(D){this.scale=new A.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:D.labels,valuesCount:D.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(D.datasets),this.scale.buildYLabels()},updateScaleRange:function(E){var D=function(){var G=[];return C.each(E,function(H){H.data?G=G.concat(H.data):C.each(H.points,function(I){G.push(I.value)})}),G}(),F=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:C.calculateScaleRange(D,C.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);C.extend(this.scale,F)},addData:function(E,D){this.scale.valuesCount++,C.each(E,function(F,H){var G=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(F));this.datasets[H].points.push(new this.PointClass({value:F,label:D,x:G.x,y:G.y,strokeColor:this.datasets[H].pointStrokeColor,fillColor:this.datasets[H].pointColor}))},this),this.scale.labels.push(D),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),C.each(this.datasets,function(D){D.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(D){D.save()}),this.reflow(),this.render()},reflow:function(){C.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:C.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(E){var D=E||1,F=this.chart.ctx;this.clear(),this.scale.draw(),C.each(this.datasets,function(G){C.each(G.points,function(H,I){H.hasValue()&&H.transition(this.scale.getPointPosition(I,this.scale.calculateCenterOffset(H.value)),D)},this),F.lineWidth=this.options.datasetStrokeWidth,F.strokeStyle=G.strokeColor,F.beginPath(),C.each(G.points,function(I,H){0===H?F.moveTo(I.x,I.y):F.lineTo(I.x,I.y)},this),F.closePath(),F.stroke(),F.fillStyle=G.fillColor,F.fill(),C.each(G.points,function(H){H.hasValue()&&H.draw()})},this)}})}.call(this);