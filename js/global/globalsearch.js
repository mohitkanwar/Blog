var pagesData=null;var getPagesData=function getPagesData(){if(pagesData===null){$.getJSON("/allpages.json",function(A){pagesData=A})}else{return pagesData}};$(document).ready(function(){$.ajaxSetup({cache:true});getPagesData();$("#global-search").keyup(globalsearch);$("#global-search").click(globalsearch);$("#global-search-form").keydown(preventDefaultEnter);$("#global-search-form").keyup(preventDefaultEnter);$("#global-search-form").keypress(preventDefaultEnter)});$(document).click(function(A){if(!$(A.target).closest("#global-search-component").length){if($("#global-search-results > .dropdown-menu").length>0){$("#global-search-results > .dropdown-menu").empty()}}});var preventDefaultEnter=function(A){if(A.keyCode==13){A.preventDefault();return false}};var globalsearch=function globalsearch(D){console.log(D.keyCode);if(D.keyCode==40){if($("#global-search-results > .dropdown-menu .selected").length==0){$("#searchresult_0").addClass("selected")}else{var A=Number($("#global-search-results > .dropdown-menu .selected").attr("id").split("searchresult_")[1]);$("#global-search-results > .dropdown-menu .selected").removeClass("selected");$("#searchresult_"+ ++A).addClass("selected")}}else{if(D.keyCode==38){if($("#global-search-results > .dropdown-menu .selected").length==0){$("#searchresult_0").addClass("selected")}else{var A=Number($("#global-search-results > .dropdown-menu .selected").attr("id").split("searchresult_")[1]);$("#global-search-results > .dropdown-menu .selected").removeClass("selected");$("#searchresult_"+ --A).addClass("selected")}}else{if(D.keyCode==13){var C=$("#global-search-results > .dropdown-menu .selected > a").attr("href");window.location.pathname=C}else{var E=$("#global-search").val();$("#global-search-results").removeClass("open");$("#global-search-results > .dropdown-menu").empty();var B=new Array();if(E!=""){$.each(getPagesData().pages,function(F,H){if(H.page.status=="published"){var G=false;if(H.page.title.toUpperCase().indexOf(E.toUpperCase())>=0){B[B.length]=H.page;G=true}if(!G){$.each(H.page.tags,function(J,I){if(I.toUpperCase().indexOf(E.toUpperCase())>=0){G=true}});if(G){B[B.length]=H.page}}}});$.each(B,function(F,G){$("#global-search-results > .dropdown-menu").append("<li id='searchresult_"+F+"'><a href="+G.uri+">"+G.title+"</a></li>")})}if(B.length>0){$("#global-search-results").addClass("open")}}}}};